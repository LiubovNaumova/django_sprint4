{% extends "base.html" %}

{% block content %}
  <article>
    <h1>{{ post.title }}</h1>

    <p>
      Автор: {{ post.author.username }}
      {% if post.category %} | Категория: {{ post.category.title }}{% endif %}
      {% if post.location %} | Место: {{ post.location.name }}{% endif %}
      | Дата: {{ post.pub_date }}
    </p>

    {% if post.image %}
      <p><img src="{{ post.image.url }}" alt=""></p>
    {% endif %}

    <div>
      {{ post.text|linebreaks }}
    </div>
  </article>

  <hr>

  <h3>Комментарии</h3>

  {% if user.is_authenticated %}
    <form method="post" action="{% url 'blog:add_comment' post.id %}">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit">Отправить</button>
    </form>
  {% else %}
    <p>Чтобы оставить комментарий — войдите.</p>
  {% endif %}

  <hr>

  {% for comment in comments %}
    <div style="margin-bottom: 16px;">
      <b>{{ comment.author.username }}</b>
      <small>{{ comment.created_at }}</small>
      <p>{{ comment.text|linebreaksbr }}</p>
    </div>
  {% empty %}
    <p>Комментариев пока нет.</p>
  {% endfor %}

{% endblock %}
